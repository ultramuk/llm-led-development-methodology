# 핵심 개념 종합 정리 (Core Concepts Consolidated)

## 1. LLM 주도 개발 시스템 (LLM-Driven Development System)

### 핵심 목표

**일관성 있는 개발 프로세스를 통해 언제나 안정된 일관적인 결과를 얻는 것**

### 시스템 구조: 3층 아키텍처

```
인간 (창조) → LLM (실행) → 자동화 툴 (검증)
```

#### 1. 인간 영역 (창조)

- **역할**: 설계, 요구조건 정의, 기준 설정
- **산출물**:
  - 가이드라인
  - 아키텍처 설계
  - 프로세스 가이드

#### 2. LLM 영역 (실행)

- **역할**: 플래닝과 개발 진행
- **구성**:
  - 오퍼레이터 (메인 LLM)
  - 에이전트 (전문가들)

#### 3. 자동화 툴 영역 (검증)

- **역할**: 객관적 결과 검증
- **도구**:
  - 테스트 도구
  - 정적 검증 툴
  - 자동화된 품질 검사

### 5대 핵심 구성요소

#### 1. 에이전트 (Agents)

- **정의**: 오퍼레이터가 전문 영역 능력이 필요할 때 호출하는 각 영역의 전문가
- **위치**: LLM 실행 영역
- **특징**:
  - 페르소나와 자체 폴리시 보유
  - 보편적인 내용만 프롬프트에 포함
  - 프로젝트 특화 컨텍스트는 외부에서 로드

#### 2. 커맨드 (Commands)

- **정의**: 인간이 오퍼레이터에게 사용하는 명령
- **위치**: 인간 → LLM 인터페이스
- **특징**:
  - 구체적인 과정과 명확한 결과물
  - 일관된 아웃풋 생성이 핵심
  - 페르소나보다 프로세스 중심
  - 자동화 과정에 가까운 개념

#### 3. 훅 (Hooks)

- **정의**: 특정 이벤트 발생 시 자동 실행되는 메커니즘
- **위치**: 시스템 전체에 걸친 이벤트 처리
- **특징**:
  - 도구 특화적 성격
  - LLM 위임 vs 시스템화 고민 필요
  - (추후 구체화 예정)

#### 4. 시스템 프롬프트 (System Prompts)

- **정의**: 모든 에이전트와 오퍼레이터가 가져가는 기본 규칙
- **위치**: LLM 영역 전체의 기반
- **특징**:
  - 공통 행동 규칙
  - 효율적 구조 설계 필요

#### 5. 프로세스 가이드 (Process Guides)

- **정의**: 인간을 위한 시스템 사용 설명서
- **위치**: 인간 영역
- **특징**:
  - 시스템 사용 방법 안내
  - LLM에 할당 불가 (컨텍스트 그레디언트 디센트 문제)
  - 인간이 참조하여 시스템 활용

### 주요 발견사항: 컨텍스트 그레디언트 디센트 문제

- LLM은 컨텍스트가 길어질수록 중요 정보가 희석됨
- 프로세스 가이드를 LLM에 할당할 수 없는 핵심 이유
- 인간이 직접 관리해야 하는 영역 존재

## 2. 프로젝트 문서 구조 (Project Documentation Structure)

### 기본 구조

모든 프로젝트는 루트에 `/documents` 폴더를 가지며, 그 아래에 세 가지 핵심 폴더를 포함:

```
/documents
├── /guidelines      # 보편적 기준
├── /architectures   # 프로젝트 특화 설계
└── /process        # 프로세스 가이드라인
```

### 문서 유형별 정의

#### 1. Guidelines (가이드라인)

- **정의**: 특정 기술이나 도구에 대한 **보편적이고 재사용 가능한 기준**
- **특징**:
  - 기술 중심: 언어, 프레임워크, 라이브러리별 표준
  - 프로젝트 독립적: 어떤 프로젝트에서도 적용 가능
  - 베스트 프랙티스: 업계 표준과 검증된 패턴
- **예시**: `cpp.md`, `javascript.md`, `react.md`, `router.md`

#### 2. Architectures (아키텍처)

- **정의**: **이 프로젝트만의 특별한 구조와 설계 결정**
- **특징**:
  - 프로젝트 특화: 이 프로젝트에서만 유효한 설계
  - 구조 정의: 폴더 구조, 모듈 관계, 시스템 설계
  - 비즈니스 로직: 도메인 특화 처리 방법
- **예시**: `project-structure.md`, `design-tokens.md`, `data-flow.md`

#### 3. Process (프로세스 가이드라인)

- **정의**: **LLM이 이 프로젝트를 구현할 때 반드시 따라야 하는 과정**
- **특징**:
  - 강제적 프로세스: 선택이 아닌 필수 과정
  - 순차적 실행: 정해진 순서대로 진행
  - 검증 포함: 각 단계마다 검증 과정 포함

### 핵심 원칙: 추상화와 불변성

#### 문제점

문서가 프로젝트 구현에 따라 변경되면 일관성이 깨진다

#### 해결책: 변수를 통한 추상화

**나쁜 예** (구체적이고 변경되는 문서):

```markdown
# API 엔드포인트
- 사용자 목록: GET /api/v1/users
- 사용자 상세: GET /api/v1/users/123
```

**좋은 예** (추상화되고 불변하는 문서):

```markdown
# API 엔드포인트
- 사용자 목록: GET ${API_BASE_URL}/users
- 사용자 상세: GET ${API_BASE_URL}/users/${USER_ID}
```

#### 변수 사용 규칙

1. **환경 변수**: `${API_BASE_URL}`, `${DB_HOST}`
2. **설정 값**: `${MAX_RETRY}`, `${TIMEOUT_SECONDS}`
3. **경로 변수**: `${PROJECT_ROOT}`, `${ASSETS_PATH}`
4. **동적 값**: `${CURRENT_VERSION}`, `${BUILD_NUMBER}`

### 문서 작성 가이드라인

1. **불변성 원칙**: 구현이 변경되어도 문서는 수정하지 않음
2. **추상화 수준**: Guidelines(높음) → Architectures(중간) → Implementation(낮음)
3. **참조 관계**: Guidelines → Architectures → Implementation

## 3. 시스템 프롬프트 구조 (System Prompt Structure)

### 2레벨 구조

시스템 프롬프트는 두 레벨로 구분되어 관리:

```
/system-prompts
├── root.md           # 루트 레벨 시스템 프롬프트
└── project.md        # 프로젝트 레벨 시스템 프롬프트
```

### 1. 루트 레벨 시스템 프롬프트

**정의**: 모든 프로젝트에서 공통으로 사용되는 기본 행동 규칙

**포함 내용**:

- 기본 역할 정의: 오퍼레이터/에이전트 구분
- 범용 행동 원칙: 문서 우선, 검증 우선
- 공통 출력 형식: 에러, 성공, 진행 상황 보고
- 보편적 금지사항: 추측 금지, 검증 스킵 금지
- 기본 문서 구조 인식: `/documents` 폴더 구조

**특징**:

- 프로젝트 독립적
- 변경 최소화
- 모든 LLM이 반드시 로드

### 2. 프로젝트 레벨 시스템 프롬프트

**정의**: 특정 프로젝트에만 적용되는 특화된 규칙

**포함 내용**:

- 프로젝트 컨텍스트: 프로젝트명, 목적, 도메인
- 기술 스택: 사용 언어, 프레임워크, 도구
- 프로젝트 특화 경로: 소스 코드 위치, 빌드 경로
- 특별 규칙: 이 프로젝트만의 컨벤션
- 변수 값: 프로젝트별 변수 정의

**특징**:

- 프로젝트 의존적
- 자주 업데이트 가능
- 루트 레벨 이후 추가 로드

### 로딩 순서와 우선순위

```
1. 루트 레벨 시스템 프롬프트 로드
    ↓
2. 프로젝트 레벨 시스템 프롬프트 로드
    ↓
3. 병합된 컨텍스트로 실행
```

**충돌 시 우선순위**:

1. 프로젝트 레벨 (더 구체적)
2. 루트 레벨 (기본값)

### 관리 방안

**루트 레벨 관리**:

- 중앙 저장소에서 버전 관리
- 변경 시 모든 프로젝트 영향
- 신중한 업데이트 필요

**프로젝트 레벨 관리**:

- 각 프로젝트 저장소에 포함
- 프로젝트 팀이 직접 관리
- 자유로운 커스터마이징

## 핵심 통찰과 결론

### 시스템 설계 원칙

1. **역할 분리**: 인간(창조) - LLM(실행) - 도구(검증)의 명확한 구분
2. **문서 중심**: 모든 결정과 규칙은 문서화되고 문서 우선으로 실행
3. **변수 활용**: 하드코딩을 피하고 추상화를 통한 일관성 보장
4. **계층적 구조**: 루트(공통) → 프로젝트(특화) → 구현(구체)

### 일관성 보장 메커니즘

1. **불변성**: 문서는 변경되지 않으며 변수로 가변성 처리
2. **검증**: 모든 실행은 자동화된 도구로 검증
3. **프로세스**: 정해진 순서와 단계 강제
4. **컨텍스트 관리**: 그레디언트 디센트 문제 해결을 위한 구조화

### 기대 효과

- **예측가능성**: 동일한 입력에 대한 일관된 결과
- **유지보수성**: 명확한 문서 구조와 변수 시스템
- **확장성**: 템플릿 기반 프로젝트 확장
- **협업**: 인간-LLM 간 명확한 역할 분담

---

*작성일: 2025-09-03*
*출처: core-concepts 폴더의 3개 핵심 문서 통합 정리*
